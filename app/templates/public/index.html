{% extends 'base.html' %}
{% block content %}
<h1 class="h4 mb-4">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h1>

{# ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å Grid (row-cols-md-3) ‡πÄ‡∏õ‡πá‡∏ô List (row-cols-1) #}
<div class="row row-cols-1 g-4"> 
¬† {% for p in items %}
¬† <div class="col">
    {# üí° ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Card ‡∏ó‡∏±‡πâ‡∏á‡πÉ‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏•‡∏∞‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á 3 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå #}
    <a href="{{ url_for('public.property_detail', prop_id=p.id) }}" class="text-decoration-none text-dark d-block">
      
      {# ‡πÉ‡∏ä‡πâ Card ‡πÅ‡∏ö‡∏ö Horizontal (row g-0) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ö‡πà‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î #}
      <div class="card shadow-sm border-0">
        <div class="row g-0">
            
            {# --- ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (4/12 ‡∏™‡πà‡∏ß‡∏ô) --- #}
            <div class="col-md-4">
                {% set first_image = p.images|sort(attribute='position')|first %}
                {% if first_image %}
                    <img src="/{{ first_image.file_path }}" 
                         class="img-fluid rounded-start" 
                         alt="{{ p.dorm_name }}" 
                         style="height: 200px; width: 100%; object-fit: cover;">
                {% else %}
                    <div class="text-center d-flex justify-content-center align-items-center bg-light text-muted rounded-start" style="height: 200px;">[Image Placeholder]</div>
                {% endif %}
            </div>
            
            {# --- ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (8/12 ‡∏™‡πà‡∏ß‡∏ô) --- #}
            <div class="col-md-8">
                {# ‡πÉ‡∏ä‡πâ d-flex flex-column h-100 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏±‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á #}
                <div class="card-body d-flex flex-column h-100">
                    <h5 class="card-title text-truncate mb-1">{{ p.dorm_name }}</h5>
                    <div class="small text-muted">{{ p.room_type }}</div>
                    
                    {# ‡∏£‡∏≤‡∏Ñ‡∏≤ #}
                    <p class="text-primary h5 mt-2 mb-2">
                        {{ "{:,.0f}".format(p.rent_price) if p.rent_price is not none else 'N/A' }} THB / ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
                    </p>
                    <small class="text-muted">{{ p.road or 'N/A' }} Area</small>
                    
                    {# ‡∏õ‡∏∏‡πà‡∏° - ‡πÉ‡∏ä‡πâ mt-auto ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏±‡∏ô‡∏•‡∏á‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á #}
                    <div class="mt-auto pt-3">
                        <span class="btn btn-sm btn-outline-primary">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span>
                    </div>
                </div>
            </div>
            
        </div>
      </div>
    </a>
¬† </div>
¬† {% else %}
¬† <div class="col"><div class="alert alert-secondary">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</div></div>
¬† {% endfor %}
</div>
{% endblock %}