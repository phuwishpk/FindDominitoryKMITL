<!DOCTYPE html>
<html>
<head>
    <title>รายละเอียด {{ dorm.name }}</title>
</head>
<body>
    <h1>รายละเอียดหอพัก: {{ dorm.name }}</h1>
    <p><strong>ค่าน้ำ:</strong> {{ dorm.water_fee }} บาท</p>
    <p><strong>ค่าไฟ:</strong> {{ dorm.electricity_fee }} บาท</p>
    <p><strong>ค่าแรกเข้า:</strong> {{ dorm.deposit }} บาท</p>
    <p><strong>Line ID:</strong> {{ dorm.contact_line }}</p>
    <p><strong>เบอร์โทรศัพท์:</strong> {{ dorm.contact_phone }}</p>

    <a href="{{ url_for('edit_dorm', dorm_id=dorm.id) }}">แก้ไขหอพัก</a>
    <form method="POST" action="{{ url_for('delete_dorm', dorm_id=dorm.id) }}" style="display:inline;">
        <button type="submit">ลบหอพัก</button>
    </form>

    <hr>

    <h2>เพิ่มห้องพัก</h2>
    <form method="POST" action="{{ url_for('add_room', dorm_id=dorm.id) }}">
        <label for="room_type">ประเภทห้อง (ราคา):</label><br>
        <input type="text" id="room_type" name="room_type" placeholder="เช่น ห้องแอร์ 3500 บาท" required><br><br>
        
        <label for="price">ราคา:</label><br>
        <input type="number" id="price" name="price" required><br><br>
        
        <label for="room_count">จำนวนห้อง:</label><br>
        <input type="number" id="room_count" name="room_count" required><br><br>

        <label for="images">รูปภาพ (URL):</label><br>
        <input type="text" name="images" placeholder="URL รูปภาพ 1"><br>
        <input type="text" name="images" placeholder="URL รูปภาพ 2"><br>
        <button type="submit">เพิ่มห้อง</button>
    </form>

    <hr>
    
    <h2>ข้อมูลห้องพัก</h2>
    {% if rooms %}
        <ul>
        {% for room in rooms %}
            <li>
                <h4>{{ room.room_type }}</h4>
                <p>ราคา: {{ room.price }} บาท</p>
                <p>จำนวน: {{ room.room_count }} ห้อง</p>
                {% if room.images %}
                    {% set image_list = room.images | from_json %}
                    {% for img_url in image_list %}
                        <img src="{{ img_url }}" alt="รูปห้องพัก" style="max-width:200px;"><br>
                    {% endfor %}
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>ยังไม่มีห้องพักในหอพักนี้</p>
    {% endif %}
    
    <hr>

    <h2>อนุมัติข้อมูล</h2>
    <form method="POST" action="{{ url_for('approve_dorm', dorm_id=dorm.id) }}">
        <button type="submit">ส่งข้อมูลให้แอดมินอนุมัติ</button>
    </form>
    
    <a href="{{ url_for('home') }}">ย้อนกลับหน้าหลัก</a>

</body>
</html>