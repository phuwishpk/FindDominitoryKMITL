{% extends 'base.html' %}

{% block title %}รายละเอียดหอพัก: {{ dorm.name }}{% endblock %}

{% block content %}
    <h1>รายละเอียดหอพัก: {{ dorm.name }}</h1>
    <p><strong>ค่าน้ำ:</strong> {{ dorm.water_fee }} บาท</p>
    <p><strong>ค่าไฟ:</strong> {{ dorm.electricity_fee }} บาท</p>
    <p><strong>ค่าแรกเข้า:</strong> {{ dorm.deposit }} บาท</p>
    <p><strong>Line ID:</strong> {{ dorm.contact_line }}</p>
    <p><strong>เบอร์โทรศัพท์:</strong> {{ dorm.contact_phone }}</p>

    <hr>

    <h2>ข้อมูลห้องพัก</h2>
    {% if rooms %}
        <ul>
        {% for room in rooms %}
            <li>
                <h4>{{ room.room_type }}</h4>
                <p>ราคา: {{ room.price }} บาท</p>
                <p>จำนวน: {{ room.room_count }} ห้อง</p>
                {% if room.images %}
                    <p>รูปภาพ:</p>
                    {% set image_list = room.images | from_json %}
                    {% for img_url in image_list %}
                        <img src="{{ img_url }}" alt="รูปห้องพัก" style="max-width:200px; display: block; margin-bottom: 10px; border-radius: 5px; border: 1px solid #ccc;"><br>
                    {% endfor %}
                {% endif %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>ยังไม่มีห้องพักในหอพักนี้</p>
    {% endif %}
    
    <hr>
    
    <h2>จัดการการอนุมัติ</h2>
    <form method="POST" action="{{ url_for('admin_approve_dorm', dorm_id=dorm.id) }}" style="display:inline;">
        <button type="submit" style="background-color: #28a745;">อนุมัติ</button>
    </form>
    
    <form method="POST" action="{{ url_for('admin_reject_dorm', dorm_id=dorm.id) }}" style="display:inline;">
        <label for="rejection_reason">เหตุผลการไม่อนุมัติ:</label>
        <input type="text" id="rejection_reason" name="rejection_reason" required>
        <button type="submit" style="background-color: #dc3545;">ไม่อนุมัติ</button>
    </form>
    
    <hr>
    <a href="{{ url_for('admin_dashboard') }}">ย้อนกลับหน้าหลักแอดมิน</a>
{% endblock %}
